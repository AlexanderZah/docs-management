# Docs Management Service

## Описание

Сервис для хранения и управления документами с поддержкой прав доступа.  
Используется PostgreSQL для хранения данных и Redis для кеша. 

## Как запустить

1. Клонируйте репозиторий:

```bash
git clone https://github.com/AlexanderZah/docs-management.git
cd docs-management
```

2. Запустите сервисы с помощью Docker Compose:
```bash
docker-compose -f deployments/docker-compose.yaml up --build
```

3. Приложение будет доступно по адресу:
```
http://localhost:8082
```
4. Чтобы остановить контейнеры, выполните:
```
docker-compose -f deployments/docker-compose.yaml down
```

## API Роуты и их описание

### 1. Аутентификация и регистрация

- **POST /api/auth**  
  Авторизация пользователя. Принимает логин и пароль, возвращает токен сессии.

- **POST /api/register**  
  Регистрация нового пользователя. Принимает необходимые данные для создания аккаунта.

### 2. Документы

Все запросы к документам требуют передачу токена для авторизации в заголовке.

- **GET /api/docs**  
  Получить список документов.  
  Поддерживает фильтрацию по ключу и значению (например, имя документа).  
  Параметры:  
  - `token` — токен пользователя  
  - `login` — логин пользователя  
  - `key` и `value` — фильтры по полям документа  
  - `limit` — ограничение количества результатов

- **GET /api/docs/{id}**  
  Получить документ по ID. Требует токен в заголовке.

- **POST /api/docs**  
  Загрузить новый документ. Принимает данные документа, включая имя, содержимое, права доступа и т.д.

- **DELETE /api/docs/{id}**  
  Удалить документ по ID. Требует токен в заголовке.

### 3. Авторизация Middleware

- Middleware проверяет наличие и валидность токена для всех роутов, кроме `/api/auth/*` и `/api/register`.  
- Если токен отсутствует или невалиден, возвращается HTTP 401 Unauthorized.

---

### Пример запроса с токеном

```http
GET /api/documents HTTP/1.1
Host: localhost:8082
Authorization: Bearer <your_token_here>
```
